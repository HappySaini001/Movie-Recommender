<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<title>Recommendation</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
	<link rel= "stylesheet" type= "text/css" th:href= "@{/style.css}">
</head>
<body id="content">
	<div class="results">
	    <center>
	      <h2 id="name" class="text-uppercase" th:text="${title}"></h2>
	    </center>
	</div>
	<br>

    <div id="mycontent">
        <div id="mcontent">
          <div class="poster-lg">
            <img class="poster" style="border-radius: 40px;margin-left: 90px;" height="400" width="250" th:src="${poster}">
          </div>
          <div class="poster-sm text-center">
            <img class="poster" style="border-radius: 40px;margin-bottom: 5%;" height="400" width="250" th:src="${poster}">
          </div>
          <div id="details">
            <br/>
            <h6 id="title" style="color:white;">TITLE: &nbsp;<span th:text="${title}"></span></h6>
            <h6 id="overview" style="color:white;max-width: 85%">OVERVIEW: <br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span th:text="${overview}"></span></h6>
            <h6 id="vote_average" style="color:white;">RATING: &nbsp;<span th:text="${vote_average}"></span>/10 (<span th:text="${vote_count}"></span> votes)</h6>
            <h6 id="genres" style="color:white;">GENRE: &nbsp;<span th:text="${genres}"></span></h6>
            <h6 id="date" style="color:white;">RELEASE DATE: &nbsp;<span th:text="${release_date}"></span></h6>
            <h6 id="runtime" style="color:white;">RUNTIME: &nbsp;<span th:text="${runtime}"></span></h6>
            <h6 id="status" style="color:white;">STATUS: &nbsp;<span th:text="${status}"></span></h6>
          </div>
        </div>
    </div>
    <br/>

    <div th:each="entry : ${cast_details}">
      <div class="modal fade" th:id="${entry.value[0]}" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header" style="background-color: #e50914;color: white;">
              <h5 class="modal-title" th:text="${entry.key}"></h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true" style="color: white">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <img class="profile-pic" th:src="${entry.value[1]}" style="width: 250px;height:400px;border-radius: 10px;" />
              <div style="margin-left: 20px">
                <p><strong>Birthday:</strong> <span th:text="${entry.value[2]}"></span></p>
                <p><strong>Place of Birth:</strong> <span th:text="${entry.value[3]}"></span></p>
                <p><strong>Biography:</strong> <span th:text="${entry.value[4]}"></span></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div th:if="${casts.size() > 1}">
        <div class="movie" style="color: #E8E8E8;">
            <center><h3>TOP CAST</h3><h5>(Click on the cast to know more)</h5></center>
        </div>
        <div class="movie-content">
            <div th:each="entry : ${casts}" class="castcard card" style="width: 15rem;" data-toggle="modal" th:data-target="'#' + ${entry.value[0]}">
                <div class="imghvr">
                    <img class="card-img-top cast-img" height="360" width="240" th:src="${entry.value[2]}">
                    <figcaption class="fig"><button class="card-btn btn btn-danger"> Know More </button></figcaption>
                </div>
                <div class="card-body">
                    <h5 class="card-title" th:text="${entry.key}"></h5>
                    <h5 class="card-title"><span style="color:#756969;font-size: 20px;">Character: <span th:text="${entry.value[1]}"></span></span></h5>
                </div>
            </div>
        </div>
    </div>

    <center>
        <div th:if="${reviews != null && !reviews.isEmpty()}">
            <h2 style="color:white">USER REVIEWS</h2>
            <div class="col-md-12" style="margin: 0 auto; margin-top:25px;">
                <table class="table table-bordered" bordercolor="white" style="color:white">
                    <thead>
                        <tr><th class="text-center" scope="col" style="width: 75%">Comments</th><th class="text-center" scope="col">Sentiments</th></tr>
                    </thead>
                    <tbody>
                        <tr th:each="entry : ${reviews}" style="background-color:#e5091485;">
                            <td th:text="${entry.key}"></td>
                            <td><center>
                                <span th:text="${entry.value}"></span> : 
                                <span th:if="${entry.value == 'Good'}">&#128515;</span>
                                <span th:unless="${entry.value == 'Good'}">&#128534;</span>
                            </center></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div th:unless="${reviews != null && !reviews.isEmpty()}" style="color:white;">
            <h1 style="color:white"> This movie is not released yet. Stay tuned! </h1>
        </div>
    </center>

    <div th:if="${movie_cards.size() > 1}">
        <div class="movie" style="color: #E8E8E8;">
            <center><h3>RECOMMENDED MOVIES FOR YOU</h3><h5>(Click any of the movies to get recommendation)</h5></center>
        </div>
        <div class="movie-content">
            <div th:each="entry : ${movie_cards}" class="card" style="width: 15rem;" th:title="${entry.value}" onclick="recommendcard(this)">
                <div class="imghvr">
                    <img class="card-img-top" height="360" width="240" th:src="${entry.key}">
                    <figcaption class="fig"><button class="card-btn btn btn-danger"> Click Me </button></figcaption>
                </div>
                <div class="card-body">
                    <h5 class="card-title" th:text="${entry.value}"></h5>
                </div>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" th:src="@{/recommend.js}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</body>
</html>